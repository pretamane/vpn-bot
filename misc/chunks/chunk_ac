iAgICAgICAgICAg
ICAgICBlbGlmIHByb3RvY29sID09ICdzcyc6CiAgICAgICAgICAgICAgICAgICAgZnJvbSBzcmMu
Ym90LmNvbmZpZ19tYW5hZ2VyIGltcG9ydCBhZGRfc3NfdXNlcgogICAgICAgICAgICAgICAgICAg
IGFkZF9zc191c2VyKG5ld19rZXlfdXVpZCwga2V5X3RhZykKICAgICAgICAgICAgICAgICAgICBp
bXBvcnQgYmFzZTY0CiAgICAgICAgICAgICAgICAgICAgc3NfY3JlZGVudGlhbCA9IGYie1NTX01F
VEhPRH06e25ld19rZXlfdXVpZH0iCiAgICAgICAgICAgICAgICAgICAgc3NfZW5jb2RlZCA9IGJh
c2U2NC5iNjRlbmNvZGUoc3NfY3JlZGVudGlhbC5lbmNvZGUoKSkuZGVjb2RlKCkKICAgICAgICAg
ICAgICAgICAgICB2cG5fbGluayA9IGYic3M6Ly97c3NfZW5jb2RlZH1Ae1NTX1NFUlZFUn06e1NT
X1BPUlR9I3trZXlfdGFnfSIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGVs
aWYgcHJvdG9jb2wgPT0gJ3R1aWMnOgogICAgICAgICAgICAgICAgICAgIGZyb20gc3JjLmJvdC5j
b25maWdfbWFuYWdlciBpbXBvcnQgYWRkX3R1aWNfdXNlcgogICAgICAgICAgICAgICAgICAgIGFk
ZF90dWljX3VzZXIobmV3X2tleV91dWlkLCBrZXlfdGFnKQogICAgICAgICAgICAgICAgICAgIHZw
bl9saW5rID0gZiJ0dWljOi8ve25ld19rZXlfdXVpZH06e25ld19rZXlfdXVpZH1Ae1NFUlZFUl9J
UH06e1RVSUNfUE9SVH0/Y29uZ2VzdGlvbl9jb250cm9sPWJiciZhbHBuPWgzJnNuaT13d3cubWlj
cm9zb2Z0LmNvbSZhbGxvd19pbnNlY3VyZT0xI3trZXlfdGFnfSIKCiAgICAgICAgICAgICAgICBl
bGlmIHByb3RvY29sID09ICd2bGVzc3BsYWluJzoKICAgICAgICAgICAgICAgICAgICBmcm9tIHNy
Yy5ib3QuY29uZmlnX21hbmFnZXIgaW1wb3J0IGFkZF92bGVzc19wbGFpbl91c2VyCiAgICAgICAg
ICAgICAgICAgICAgYWRkX3ZsZXNzX3BsYWluX3VzZXIobmV3X2tleV91dWlkLCBrZXlfdGFnKQog
ICAgICAgICAgICAgICAgICAgIHZwbl9saW5rID0gZiJ2bGVzczovL3tuZXdfa2V5X3V1aWR9QHtT
RVJWRVJfSVB9OntWTEVTU19QTEFJTl9QT1JUfT9zZWN1cml0eT10bHMmZW5jcnlwdGlvbj1ub25l
JnR5cGU9dGNwJnNuaT13d3cubWljcm9zb2Z0LmNvbSZhbGxvd0luc2VjdXJlPTEje2tleV90YWd9
IgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBlbGlmIHByb3RvY29sID09ICdzc19s
ZWdhY3knOgogICAgICAgICAgICAgICAgICAgICAjIE5vIGNvbmZpZyB1cGRhdGUgbmVlZGVkIGZv
ciBsZWdhY3kgc2hhcmVkIHBhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgIGltcG9ydCBiYXNl
NjQKICAgICAgICAgICAgICAgICAgICAgc3NfY3JlZGVudGlhbCA9IGYie1NTX01FVEhPRH06e1NT
X0xFR0FDWV9QQVNTV09SRH0iCiAgICAgICAgICAgICAgICAgICAgIHNzX2VuY29kZWQgPSBiYXNl
NjQuYjY0ZW5jb2RlKHNzX2NyZWRlbnRpYWwuZW5jb2RlKCkpLmRlY29kZSgpCiAgICAgICAgICAg
ICAgICAgICAgIHZwbl9saW5rID0gZiJzczovL3tzc19lbmNvZGVkfUB7U1NfU0VSVkVSfTp7U1Nf
TEVHQUNZX1BPUlR9I3trZXlfdGFnfSIKCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMCwgZGV0YWlsPSJJ
bnZhbGlkIHByb3RvY29sIikKCiAgICAgICAgICAgICAgICAjIFNhdmUgdGhlIFZQTiBrZXkgdG8g
dnBuX2tleXMgdGFibGUgZm9yIHJldHJpZXZhbAogICAgICAgICAgICAgICAgdHJ5OgogICAgICAg
ICAgICAgICAgICAgIGZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lZGVsdGEKICAg
ICAgICAgICAgICAgICAgICBleHBpcmVzX2F0ID0gKGRhdGV0aW1lLm5vdygpICsgdGltZWRlbHRh
KGRheXM9MzApKS5pc29mb3JtYXQoKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgIHByaW50KGYiW0tFWVNfREVCVUddIEF0dGVtcHRpbmcgdG8gc2F2ZSBrZXkgdG8gdnBu
X2tleXMgdGFibGUuLi4iKQogICAgICAgICAgICAgICAgICAgIHByaW50KGYiW0tFWVNfREVCVUdd
IHVzZXJfdXVpZD17dXVpZH0sIGtleV9uYW1lPXtrZXlfdGFnfSwgcHJvdG9jb2w9e3Byb3RvY29s
fSIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29ubiA9IGdldF9k
Yl9jb25uZWN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigp
CiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiCiAgICAgICAgICAgICAgICAg
ICAgICAgIElOU0VSVCBJTlRPIHZwbl9rZXlzICh1c2VyX3V1aWQsIGtleV9uYW1lLCBwcm90b2Nv
bCwgc2VydmVyX2FkZHJlc3MsIHNlcnZlcl9wb3J0LAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAga2V5X3V1aWQsIGtleV9wYXNzd29yZCwgY29uZmlnX2xpbmss
IGV4cGlyZXNfYXQpCiAgICAgICAgICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywg
PywgPywgPywgPywgPykKICAgICAgICAgICAgICAgICAgICAiIiIsICh1dWlkLCBrZXlfdGFnLCBw
cm90b2NvbCwgU0VSVkVSX0lQLCAKICAgICAgICAgICAgICAgICAgICAgICAgICBTRVJWRVJfUE9S
VCBpZiBwcm90b2NvbCBpbiBbJ3ZsZXNzJywgJ3R1aWMnXSBlbHNlIChMSU1JVEVEX1BPUlQgaWYg
cHJvdG9jb2wgPT0gJ3ZsZXNzX2xpbWl0ZWQnIGVsc2UgKFNTX1BPUlQgaWYgcHJvdG9jb2wgaW4g
WydzcyddIGVsc2UgVkxFU1NfUExBSU5fUE9SVCkpLAogICAgICAgICAgICAgICAgICAgICAgICAg
IG5ld19rZXlfdXVpZCwgbmV3X2tleV91dWlkIGlmIHByb3RvY29sIGluIFsndHVpYyddIGVsc2Ug
Tm9uZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgdnBuX2xpbmssIGV4cGlyZXNfYXQpKQog
ICAgICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCkKICAgICAgICAgICAgICAgICAgICBjb25u
LmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBwcmludChmIltLRVlTX0RFQlVHXSDinIUgS2V5
IHNhdmVkIHRvIHZwbl9rZXlzIHRhYmxlIHN1Y2Nlc3NmdWxseSEiKQogICAgICAgICAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBkYl9lcnJvcjoKICAgICAgICAgICAgICAgICAgICBwcmludChm
IltLRVlTX0RFQlVHXSDinYwgRmFpbGVkIHRvIHNhdmUgdG8gdnBuX2tleXMgdGFibGU6IHtkYl9l
cnJvcn0iKQogICAgICAgICAgICAgICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICAgICAg
ICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKCiAgICAgICAgICAgICAgICByZXR1cm4gewog
ICAgICAgICAgICAgICAgICAgICJzdWNjZXNzIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAi
bWVzc2FnZSI6ICJQYXltZW50IFZlcmlmaWVkISIsCiAgICAgICAgICAgICAgICAgICAgImtleSI6
IHZwbl9saW5rLAogICAgICAgICAgICAgICAgICAgICJwcm90b2NvbCI6IHByb3RvY29sLAogICAg
ICAgICAgICAgICAgICAgICJ0cmFuc2FjdGlvbl9pZCI6IGRhdGFbJ3RyYW5zYWN0aW9uX2lkJ10K
ICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAg
ICAgICAgICAgICAgIHByaW50KGYiQ29uZmlnIHVwZGF0ZSBmYWlsZWQ6IHtlfSIpCiAgICAgICAg
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPSJGYWls
ZWQgdG8gYWN0aXZhdGUgVlBOIGtleSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIHJhaXNl
IEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9IkRhdGFiYXNlIGVycm9yIikK
CiAgICBleGNlcHQgSW52YWxpZFJlY2VpcHRFcnJvciBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBF
eGNlcHRpb24oc3RhdHVzX2NvZGU9NDAwLCBkZXRhaWw9ZiJJbnZhbGlkIFJlY2VpcHQ6IHtzdHIo
ZSl9IikKICAgIGV4Y2VwdCBIVFRQRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFpc2UgZQogICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiVmVyaWZpY2F0aW9uIGVycm9y
OiB7ZX0iKQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRh
aWw9c3RyKGUpKQogICAgZmluYWxseToKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyh0bXBfcGF0
aCk6CiAgICAgICAgICAgIG9zLnVubGluayh0bXBfcGF0aCkKCkBhcHAuZ2V0KCIvIikKYXN5bmMg
ZGVmIHJvb3QoKToKICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiTU1WUE4gQVBJIGlzIHJ1bm5pbmci
fQoKQGFwcC5nZXQoIi9hcGkvYm90L2NvbmZpZyIpCmFzeW5jIGRlZiBnZXRfYm90X2NvbmZpZygp
OgogICAgZnJvbSBzcmMuYm90LmNvbmZpZyBpbXBvcnQgS0JaX1BBWV9OVU1CRVIsIFdBVkVfUEFZ
X05VTUJFUiwgQURNSU5fVVNFUk5BTUUKICAgIHJldHVybiB7CiAgICAgICAgInBheW1lbnQiOiB7
CiAgICAgICAgICAgICJrYnoiOiBLQlpfUEFZX05VTUJFUiwKICAgICAgICAgICAgIndhdmUiOiBX
QVZFX1BBWV9OVU1CRVIsCiAgICAgICAgICAgICJwcmljZSI6ICIzLDAwMCBNTUsvbW9udGgiCiAg
ICAgICAgfSwKICAgICAgICAic3VwcG9ydCI6IHsKICAgICAgICAgICAgImNvbnRhY3QiOiBBRE1J
Tl9VU0VSTkFNRQogICAgICAgIH0sCiAgICAgICAgInByb3RvY29scyI6IFsKICAgICAgICAgICAg
eyJjb2RlIjogInZsZXNzIiwgIm5hbWUiOiAiVkxFU1MgUmVhbGl0eSAoNDQzKSJ9LAogICAgICAg
ICAgICB7ImNvZGUiOiAic3MiLCAibmFtZSI6ICJTaGFkb3dzb2NrcyAoOTM4OCkifSwKICAgICAg
ICAgICAgeyJjb2RlIjogInR1aWMiLCAibmFtZSI6ICJUVUlDLVNlcnZlciAoMjA4MykifSwKICAg
ICAgICAgICAgeyJjb2RlIjogInZsZXNzcGxhaW4iLCAibmFtZSI6ICJWTEVTUyArIFRMUyAoODQ0
NCkifSwKICAgICAgICAgICAgeyJjb2RlIjogInNzX2xlZ2FjeSIsICJuYW1lIjogIlNoYWRvd3Nv
Y2tzIExlZ2FjeSAoODM4OCkifQogICAgICAgIF0KICAgIH0KCmlmIF9fbmFtZV9fID09ICJfX21h
aW5fXyI6CiAgICB1dmljb3JuLnJ1bihhcHAsIGhvc3Q9IjAuMC4wLjAiLCBwb3J0PUFQSV9QT1JU
KQoK
