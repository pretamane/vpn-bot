CAgIGN1
cnNvci5leGVjdXRlKCJTRUxFQ1QgYnl0ZXNfdXNlZCBGUk9NIHVzYWdlX2xvZ3MgV0hFUkUgdXVp
ZCA9ID8gQU5EIGRhdGUgPSA/IiwgKHV1aWQsIHRvZGF5KSkKICAgIHVzYWdlX3JvdyA9IGN1cnNv
ci5mZXRjaG9uZSgpCiAgICBkYWlseV91c2FnZSA9IGRhaWx5X3VzYWdlX2J5dGVzID0gdXNhZ2Vf
cm93WydieXRlc191c2VkJ10gaWYgdXNhZ2Vfcm93IGVsc2UgMAogICAgCiAgICBjb25uLmNsb3Nl
KCkKICAgIAogICAgaWYgdXNlcjoKICAgICAgICAjIENhbGN1bGF0ZSBkYXRhIHVzYWdlIHBlcmNl
bnRhZ2UgYW5kIGdyYWNlIHBlcmlvZCBpbmZvCiAgICAgICAgZGF0YV9saW1pdF9nYiA9IHVzZXJb
J2RhdGFfbGltaXRfZ2InXSBvciA1LjAKICAgICAgICBkYWlseV91c2FnZV9nYiA9IGRhaWx5X3Vz
YWdlX2J5dGVzIC8gKDEwMjQqKjMpCiAgICAgICAgdXNhZ2VfcGVyY2VudGFnZSA9IChkYWlseV91
c2FnZV9nYiAvIGRhdGFfbGltaXRfZ2IpICogMTAwIGlmIGRhdGFfbGltaXRfZ2IgPiAwIGVsc2Ug
MAogICAgICAgIAogICAgICAgICMgR3JhY2UgcGVyaW9kIGluZm9ybWF0aW9uCiAgICAgICAgZnJv
bSBzcmMuZGIuZGF0YWJhc2UgaW1wb3J0IGlzX2luX2dyYWNlX3BlcmlvZCwgZ2V0X2dyYWNlX3Bl
cmlvZF9yZW1haW5pbmcKICAgICAgICB1c2VyX2RpY3QgPSBkaWN0KHVzZXIpCiAgICAgICAgaW5f
Z3JhY2VfcGVyaW9kID0gaXNfaW5fZ3JhY2VfcGVyaW9kKHVzZXJfZGljdCkKICAgICAgICBncmFj
ZV9yZW1haW5pbmdfaG91cnMgPSAwCiAgICAgICAgCiAgICAgICAgaWYgaW5fZ3JhY2VfcGVyaW9k
OgogICAgICAgICAgICByZW1haW5pbmcgPSBnZXRfZ3JhY2VfcGVyaW9kX3JlbWFpbmluZyh1c2Vy
X2RpY3QpCiAgICAgICAgICAgIGlmIHJlbWFpbmluZzoKICAgICAgICAgICAgICAgIGdyYWNlX3Jl
bWFpbmluZ19ob3VycyA9IHJlbWFpbmluZy50b3RhbF9zZWNvbmRzKCkgLyAzNjAwCiAgICAgICAg
CiAgICAgICAgIyBEZXRlcm1pbmUgd2hpY2ggd2FybmluZ3MgaGF2ZSBiZWVuIHNlbnQKICAgICAg
ICB3YXJuaW5nc19zZW50ID0gdXNlcl9kaWN0LmdldCgnZGF0YV93YXJuaW5nc19zZW50JywgJycp
IG9yICcnCiAgICAgICAgd2FybmluZ3NfbGlzdCA9IHdhcm5pbmdzX3NlbnQuc3BsaXQoJywnKSBp
ZiB3YXJuaW5nc19zZW50IGVsc2UgW10KICAgICAgICAKICAgICAgICByZXR1cm4gVXNlclN0YXR1
cygKICAgICAgICAgICAgdXVpZD11c2VyWyd1dWlkJ10sCiAgICAgICAgICAgIGlzX2FjdGl2ZT1i
b29sKHVzZXJbJ2lzX2FjdGl2ZSddKSwKICAgICAgICAgICAgZXhwaXJ5X2RhdGU9dXNlclsnZXhw
aXJ5X2RhdGUnXSwKICAgICAgICAgICAgZGF0YV9saW1pdF9nYj1kYXRhX2xpbWl0X2diLAogICAg
ICAgICAgICBkYWlseV91c2FnZV9ieXRlcz1kYWlseV91c2FnZV9ieXRlcywKICAgICAgICAgICAg
cHJvdG9jb2w9dXNlclsncHJvdG9jb2wnXSBpZiB1c2VyWydwcm90b2NvbCddIGVsc2UgJ3NzJywK
ICAgICAgICAgICAgdXNhZ2VfcGVyY2VudGFnZT1yb3VuZCh1c2FnZV9wZXJjZW50YWdlLCAxKSwK
ICAgICAgICAgICAgaW5fZ3JhY2VfcGVyaW9kPWluX2dyYWNlX3BlcmlvZCwKICAgICAgICAgICAg
Z3JhY2VfcmVtYWluaW5nX2hvdXJzPXJvdW5kKGdyYWNlX3JlbWFpbmluZ19ob3VycywgMSksCiAg
ICAgICAgICAgIHdhcm5pbmdzX3NlbnQ9d2FybmluZ3NfbGlzdAogICAgICAgICkKICAgIGVsc2U6
CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iVXNl
ciBub3QgZm91bmQiKQoKQGFwcC5wb3N0KCIvYXBpL3BheW1lbnQvdmVyaWZ5IikKYXN5bmMgZGVm
IHZlcmlmeV9wYXltZW50KAogICAgZmlsZTogVXBsb2FkRmlsZSA9IEZpbGUoLi4uKSwKICAgIHV1
aWQ6IHN0ciA9IEZvcm0oLi4uKSwKICAgIHByb3RvY29sOiBzdHIgPSBGb3JtKC4uLikKKToKICAg
ICMgMS4gU2F2ZSB1cGxvYWRlZCBmaWxlIHRlbXBvcmFyaWx5CiAgICB3aXRoIHRlbXBmaWxlLk5h
bWVkVGVtcG9yYXJ5RmlsZShkZWxldGU9RmFsc2UsIHN1ZmZpeD0nLmpwZycpIGFzIHRtcDoKICAg
ICAgICBzaHV0aWwuY29weWZpbGVvYmooZmlsZS5maWxlLCB0bXApCiAgICAgICAgdG1wX3BhdGgg
PSB0bXAubmFtZQoKICAgIHRyeToKICAgICAgICAjIDIuIE9DUiAmIFZhbGlkYXRpb24KICAgICAg
ICBmcm9tIHNyYy5zZXJ2aWNlcy5vY3Jfc2VydmljZSBpbXBvcnQgb2NyX3NlcnZpY2UKICAgICAg
ICBmcm9tIHNyYy5zZXJ2aWNlcy5wYXltZW50X3ZhbGlkYXRvciBpbXBvcnQgcGF5bWVudF92YWxp
ZGF0b3IsIEludmFsaWRSZWNlaXB0RXJyb3IKICAgICAgICBmcm9tIHNyYy5kYi5kYXRhYmFzZSBp
bXBvcnQgaXNfdHJhbnNhY3Rpb25fdXNlZCwgYWRkX3RyYW5zYWN0aW9uLCBnZXRfdXNlciwgYWRk
X3VzZXIsIGdldF91c2VyX3N0YXRzCiAgICAgICAgCiAgICAgICAgIyBFeHRyYWN0IHRleHQKICAg
ICAgICB0ZXh0X2xpbmVzID0gb2NyX3NlcnZpY2UuZXh0cmFjdF90ZXh0KHRtcF9wYXRoKQogICAg
ICAgIGlmIG5vdCB0ZXh0X2xpbmVzOgogICAgICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0
YXR1c19jb2RlPTQwMCwgZGV0YWlsPSJDb3VsZCBub3QgcmVhZCB0ZXh0IGZyb20gaW1hZ2UiKQoK
ICAgICAgICAjIFZhbGlkYXRlIHJlY2VpcHQKICAgICAgICBkYXRhID0gcGF5bWVudF92YWxpZGF0
b3IudmFsaWRhdGVfcmVjZWlwdCh0ZXh0X2xpbmVzKQogICAgICAgIAogICAgICAgICMgQ2hlY2sg
Zm9yIGR1cGxpY2F0ZXMKICAgICAgICBpZiBpc190cmFuc2FjdGlvbl91c2VkKGRhdGFbJ3RyYW5z
YWN0aW9uX2lkJ10pOgogICAgICAgICAgICAgIyBDaGVjayBpZiBpdCdzIHRoZSB0ZXN0IHNsaXAK
ICAgICAgICAgICAgaWYgZGF0YVsndHJhbnNhY3Rpb25faWQnXSAhPSAiMDEwMDM5ODQwMjE3NzA0
MjMyMTIiOgogICAgICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00
MDAsIGRldGFpbD1mIlRyYW5zYWN0aW9uIHtkYXRhWyd0cmFuc2FjdGlvbl9pZCddfSBhbHJlYWR5
IHVzZWQiKQoKICAgICAgICAjIENoZWNrIGFtb3VudAogICAgICAgIGlmIGRhdGFbJ2Ftb3VudCdd
IDwgMzAwMDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDAs
IGRldGFpbD1mIkFtb3VudCB7ZGF0YVsnYW1vdW50J119IGlzIGxlc3MgdGhhbiAzLDAwMCBNTUsi
KQoKICAgICAgICAjIDMuIFJlY29yZCBUcmFuc2FjdGlvbgogICAgICAgICMgR2V0IHVzZXIgSUQg
ZnJvbSBVVUlECiAgICAgICAgdXNlcl9kYXRhID0gZ2V0X3VzZXIodXVpZCkKICAgICAgICBpZiBu
b3QgdXNlcl9kYXRhOgogICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29k
ZT00MDQsIGRldGFpbD0iVXNlciBub3QgZm91bmQiKQogICAgICAgICAgICAgCiAgICAgICAgYWRk
X3RyYW5zYWN0aW9uKHVzZXJfZGF0YVsndGVsZWdyYW1faWQnXSwgZGF0YVsncHJvdmlkZXInXSwg
ZGF0YVsndHJhbnNhY3Rpb25faWQnXSwgZGF0YVsnYW1vdW50J10pCgogICAgICAgICMgNC4gR2Vu
ZXJhdGUgS2V5CiAgICAgICAgaW1wb3J0IHV1aWQgYXMgdXVpZF9saWIKICAgICAgICBuZXdfa2V5
X3V1aWQgPSBzdHIodXVpZF9saWIudXVpZDQoKSkKICAgICAgICAKICAgICAgICAjIENhbGN1bGF0
ZSBrZXkgaW5kZXgKICAgICAgICBjdXJyZW50X3N0YXRzID0gZ2V0X3VzZXJfc3RhdHModXNlcl9k
YXRhWyd0ZWxlZ3JhbV9pZCddKQogICAgICAgIGtleV9pbmRleCA9IGxlbihjdXJyZW50X3N0YXRz
KSArIDEKICAgICAgICAKICAgICAgICByYXdfbmFtZSA9IHVzZXJfZGF0YVsndXNlcm5hbWUnXSBv
ciBmIlVzZXJ7dXNlcl9kYXRhWyd0ZWxlZ3JhbV9pZCddfSIKICAgICAgICBzYWZlX25hbWUgPSAi
Ii5qb2luKGMgZm9yIGMgaW4gcmF3X25hbWUgaWYgYy5pc2FsbnVtKCkpCiAgICAgICAgaWYgbm90
IHNhZmVfbmFtZTogc2FmZV9uYW1lID0gIlVzZXIiCiAgICAgICAga2V5X3RhZyA9IGYie3NhZmVf
bmFtZX0tS2V5e2tleV9pbmRleH0iCiAgICAgICAgCiAgICAgICAgIyBBZGQgdG8gREIgKGFzIGEg
bmV3ICJ1c2VyIiBlbnRyeSB3aGljaCByZXByZXNlbnRzIGEga2V5IGluIHRoaXMgc2NoZW1hKQog
ICAgICAgICMgTm90ZTogVGhlIERCIHNjaGVtYSBzZWVtcyB0byB0cmVhdCBlYWNoIGtleSBhcyBh
ICJ1c2VyIiByb3cgbGlua2VkIGJ5IHRlbGVncmFtX2lkPyAKICAgICAgICAjIEFjdHVhbGx5LCBs
b29raW5nIGF0IGJvdCBjb2RlOiBhZGRfdXNlcih1c2VyX3V1aWQsIHVzZXIuaWQsIC4uLikKICAg
ICAgICAjIFNvIHdlIGNyZWF0ZSBhIG5ldyBlbnRyeSBmb3IgdGhpcyBrZXkuCiAgICAgICAgCiAg
ICAgICAgbGltaXRfbWJwcyA9IDEyLjAgaWYgcHJvdG9jb2wgPT0gJ3ZsZXNzX2xpbWl0ZWQnIGVs
c2UgMC4wCiAgICAgICAgZGF0YV9saW1pdF9nYiA9IDMuMCBpZiBwcm90b2NvbCA9PSAndmxlc3Nf
bGltaXRlZCcgZWxzZSA1LjAgICMgM0dCIGZvciBWTEVTUyBMaW1pdGVkLCA1R0IgZGVmYXVsdCBm
b3Igb3RoZXJzCiAgICAgICAgCiAgICAgICAgaWYgYWRkX3VzZXIobmV3X2tleV91dWlkLCB1c2Vy
X2RhdGFbJ3RlbGVncmFtX2lkJ10sIHVzZXJfZGF0YVsndXNlcm5hbWUnXSwgcHJvdG9jb2wsIHVz
ZXJfZGF0YVsnbGFuZ3VhZ2VfY29kZSddLCBGYWxzZSwgc3BlZWRfbGltaXRfbWJwcz1saW1pdF9t
YnBzLCBkYXRhX2xpbWl0X2diPWRhdGFfbGltaXRfZ2IpOgogICAgICAgICAgICAjIFVwZGF0ZSBT
aW5nLUJveCBDb25maWcKICAgICAgICAgICAgZnJvbSBzcmMuYm90LmNvbmZpZyBpbXBvcnQgU0VS
VkVSX0lQLCBTRVJWRVJfUE9SVCwgUFVCTElDX0tFWSwgU0hPUlRfSUQsIFNTX1NFUlZFUiwgU1Nf
UE9SVCwgU1NfTUVUSE9ELCBUVUlDX1BPUlQsIFZMRVNTX1BMQUlOX1BPUlQsIFNFUlZFUl9OQU1F
LCBTU19MRUdBQ1lfUE9SVCwgU1NfTEVHQUNZX1BBU1NXT1JELCBMSU1JVEVEX1BPUlQKICAgICAg
ICAgICAgCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIHByb3RvY29sID09ICd2
bGVzcyc6CiAgICAgICAgICAgICAgICAgICAgZnJvbSBzcmMuYm90LmNvbmZpZ19tYW5hZ2VyIGlt
cG9ydCBhZGRfdXNlcl90b19jb25maWcKICAgICAgICAgICAgICAgICAgICBhZGRfdXNlcl90b19j
b25maWcobmV3X2tleV91dWlkLCBrZXlfdGFnLCBsaW1pdF9tYnBzPTApCiAgICAgICAgICAgICAg
ICAgICAgdnBuX2xpbmsgPSBmInZsZXNzOi8ve25ld19rZXlfdXVpZH1Ae1NFUlZFUl9JUH06e1NF
UlZFUl9QT1JUfT9zZWN1cml0eT1yZWFsaXR5JmVuY3J5cHRpb249bm9uZSZwYms9e1BVQkxJQ19L
RVl9JmZwPXJhbmRvbWl6ZWQmdHlwZT10Y3AmZmxvdz14dGxzLXJwcngtdmlzaW9uJnNuaT17U0VS
VkVSX05BTUV9JnNpZD17U0hPUlRfSUR9I3trZXlfdGFnfSIKICAgICAgICAgICAgICAgIAogICAg
ICAgICAgICAgICAgZWxpZiBwcm90b2NvbCA9PSAndmxlc3NfbGltaXRlZCc6CiAgICAgICAgICAg
ICAgICAgICAgZnJvbSBzcmMuYm90LmNvbmZpZ19tYW5hZ2VyIGltcG9ydCBhZGRfdXNlcl90b19j
b25maWcKICAgICAgICAgICAgICAgICAgICBhZGRfdXNlcl90b19jb25maWcobmV3X2tleV91dWlk
LCBrZXlfdGFnLCBsaW1pdF9tYnBzPTEyLjApCiAgICAgICAgICAgICAgICAgICAgIyBVc2UgTElN
SVRFRF9QT1JUICgxMDAwMSkgZm9yIHRoZSBsaW5rCiAgICAgICAgICAgICAgICAgICAgdnBuX2xp
bmsgPSBmInZsZXNzOi8ve25ld19rZXlfdXVpZH1Ae1NFUlZFUl9JUH06e0xJTUlURURfUE9SVH0/
c2VjdXJpdHk9cmVhbGl0eSZlbmNyeXB0aW9uPW5vbmUmcGJrPXtQVUJMSUNfS0VZfSZmcD1yYW5k
b21pemVkJnR5cGU9dGNwJmZsb3c9eHRscy1ycHJ4LXZpc2lvbiZzbmk9e1NFUlZFUl9OQU1FfSZz
aWQ9e1NIT1JUX0lEfSN7a2V5X3RhZ30iCiAgICAgICAgICAgICAgICAgICAgC